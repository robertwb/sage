= pari =

== Description ==

PARI/GP is a widely used computer algebra system designed for fast
computations in number theory (factorizations, algebraic number
theory, elliptic curves...), but also contains a large number of other
useful functions to compute with mathematical entities such as
matrices, polynomials, power series, algebraic numbers etc., and a lot
of transcendental functions. PARI is also available as a C library to
allow for faster computations.

Originally developed by Henri Cohen and his co-workers (Universit√©
Bordeaux I, France), PARI is now under the GPL and maintained by Karim
Belabas with the help of many volunteer contributors.

Website: http://pari.math.u-bordeaux.fr/

== License ==

GPL version 2+

== SPKG Maintainers ==
 * Robert Bradshaw
 * Craig Citro
 * William Stein
 * David Kirkby
 * Jeroen Demeyer

== Upstream Contact ==
 * Karim Belabas, http://www.math.u-bordeaux.fr/~belabas/
 * pari-dev@list.cr.yp.to

== Dependencies ==
 * MPIR (in place of GMP)
 * Readline
 * Termcap

== Special Update/Build Instructions ==

Most of the building of a new version of the PARI spkg is automated
in the script spkg-make.  Normally, the following should work.  In case
of doubt, have a look at the file spkg-make.

  0) Edit the line "svn update -r 12623" in spkg-make and set the
     desired SVN version.

  1) ./spkg-make
     This will download the SVN sources to the directory parisvn/
     and will also download galdata.tgz and ellsea-small.tgz.
     Then, a src/ directory will be created and the patches in
     patches/*.patch will be applied (with the patched files stored
     in patches/files).
     WARNING: This script will remove any existing src/ and
     patches/files/ directories.
     NOTES: The script ./spkg-make will actually compile PARI/GP, but
     the compiled files are not used for the spkg.  We only need a few
     files, in particular those created by bison.
     Running spkg-make should be done on a reasonably standard machine
     on which PARI/GP compiles out of the box.

  2) Check that everything is okay somehow.  In particular, look at
     patches/README.txt

  3) rm -rf parisvn
     The directory parisvn is a temporary SVN copy of the PARI sources.
     When making this package just for testing, you can keep the parisvn
     directory.  However, it should not be there in a final version.

  4) cd ..; sage -pkg pari-version-name

Note from David Kirkby that could be relevant to building on Solaris:

Since PARI is using -xarch=native, which implies -xarch=v8plusa on my
box, but I set -xarch=v8plus (without the last a), this probably means
there will be different types of object files and so they may not link
together.  Ick.  Feel free to tell me how to modify the configure
script.

I got around it by setting CFLAGS -xarch=v8plus myself, so they were
all the same. But it is not right. I have not looked at PARI to see
exactly where it says native, but I would expect a grep to find it.

== Changelog ==

=== pari-2.4.3.alpha.p0 (Jeroen Demeyer, November 4th, 2010) ===
 * Update to PARI 2.4.3 (by using SVN revision 12623).  Note that the
   PARI developers consider version 2.4.3 to be an "alpha" version with
   the idea that 2.4.4 might be a "beta" version and 2.5 will then be
   the "stable" version.
 * Removed patch for gphelp.in which is now upstream
 * Removed patch for paripriv.h because of an upstream change removing
   the need for the patch
 * Rebased patch for config/get_fltk

=== pari-2.4.3.svn-12577.p9 (Jeroen Demeyer, September 24th, 2010) ===
 * Add gprc.expect file to be installed in $SAGE_LOCAL/etc
 * Remove $detex = 1; from gphelp.in patch

=== pari-2.4.3.svn-12577.p7 (Jeroen Demeyer, September 17th, 2010) ===
 * Add -fno-common to DLCFLAGS on all Darwin systems instead of
   PPC/PPC64 only.
 * Add upstream fix for rnfequation(,,1) over Q

=== pari-2.4.3.svn-12577.p6 (Jeroen Demeyer, September 11th, 2010) ===
 * Add upstream fix for config/get_dlcflags and remove the patch
 * Add upstream fix for bnfinit() and the rnfkummer test
 * Instead of patching Configure, force bash in spkg-install

=== pari-2.4.3.svn-12577.p5 (Leif Leonhardy, Jeroen Demeyer, September 5th, 2010) ===
 * Added patches to:
   - config/get_config_options:
     * Make invalid arguments to "--graphic" a "Configure" error
       (rather than potentially running into *compilation* errors
       later).
   - config/get_fltk: (see also/ported from #9722)
     * Add libstdc++ to the libraries (to support Fedora 13 et al.).
     * Also check the presence of the FLTK include directory to
       prevent compilation errors on broken installations.
   - config/get_X11: (see also/ported from #9722)
     * Also search */lib64/* directories when doing a 64-bit build.
     * Give more specific messages.
 * Slightly extended existing patch to src/kernel/gmp/mp.c:
   - Allow disabling PARI's use of "GMP internals" by preprocessor
     directive (i.e. by adding "-DPARI_DONT_USE_GMP_INTERNALS" to
     CFLAGS). Brief explanation added.
 * spkg-install:
   - Don't override user-specified CFLAGS (w.r.t. optimization, unless
     SAGE_DEBUG=yes).
   - Handle PARI_EXTRA_OPTS properly, and print informative messages
     (regarding graphics support for plotting).
   - Recognize SAGE_TUNE_PARI in addition to SAGE_TUNE_pari, and
     add "--tune" to PARI_EXTRA_OPTS if self-tuning was requested.
   - Clear/unset lots of (environment) variables used by PARI that might
     unintentionally get their values from user settings.
   - Quote *all* occurrences of SAGE_LOCAL (and some other expressions).
   - Use $UNAME instead of `uname` everywhere, use "elif ...".
   - *Always* use $MAKE (changed for "install-data").
   - Begin all error messages with "Error".
   - Removed useless tests of $? at end.
   - Some clean-up (typos, formatting); some comments, some messages added.
 * spkg-check:
   - Use $MAKE instead of "make".
   - Don't override user-specified CFLAGS (w.r.t. optimization, unless
     SAGE_DEBUG=yes).
   - Begin error message with "Error".
   - Some clean-up.
 * Slight corrections to SPKG.txt.
 * Updated patches/README.txt, some cosmetic changes.
 * Remove patch for config/Makefile.SH and add upstream fix instead
   in spkg-make.
 * Add upstream fix for src/test/tune.c which should fix tuning.
 * Add -O0 to CFLAGS in spkg-make to speed up compiling (the output of
   the compiling is not used anyway).

=== pari-2.4.3.svn-12577.p4 (Jeroen Demeyer, August 22, 2010) ===
 * Change "test -e" to "test -f" for Solaris.
 * Configure using "#!/usr/bin/env bash" instead of "#!/bin/sh"

=== pari-2.4.3.svn-12577.p3 (Jeroen Demeyer, August 21, 2010) ===
 * Cosmetic changes

=== pari-2.4.3.svn-12577.p2 (Jeroen Demeyer, August 17, 2010) ===
 * Patch get_dlcflags on Darwin

=== pari-2.4.3.svn-12577 (Jeroen Demeyer, August 5, 2010) ===

=== pari-2.4.3.svn-12546 (Jeroen Demeyer, July 25, 2010) ===
 * Removed the non-existent get_dlld patching.
 * Cleaned up patches/README.txt

=== pari-2.4.3.svn.p7 (Jeroen Demeyer, July 23, 2010) ===
 * pari 2.4.3 version svn 12543
 * Remove patches for get_cc, get_dlcflags, get_kernel, get_dlld

=== pari-2.4.3.svn.p6 (Jeroen Demeyer, July 22, 2010) ===
 * pari 2.4.3 version svn 12541
 * Added spkg-make script to automate building of this spkg
 * Changed patch logic in spkg-install
 * Add patches for PARI bug 1079

=== pari-2.4.3.svn.p5 (John Cremona July 13, 2010) ===
 * pari 2.4.3 version svn 12541
 * adds spkg-check by David Kirkby

=== pari-2.4.3.svn.p1, p2, p3, p4 (Robert Bradshaw and William Stein,
June 26, 2010; John Cremona July 13, 2010) ===
 * Major new version
 * p4 contains pari 2.4.3 version svn 12534

=== pari-2.3.5.p1 (Mike Hansen, May 25th, 2010) ===
 * Do the same fix for Cygwin that we do on Solaris.

=== pari-2.3.5.p0 (Georg S. Weber, May 2nd, 2010 ===
 * restore resp. correct the file patches/get_dlld
   (there seems to have been a copy'n'paste issue w.r.t. pari-2.3.3.p8)
   so that pari is buildable (again) as a dynamical library on Mac OS
   (fixes trac ticket #8837, see there for more details)

=== pari-2.3.5 (Mike Hansen, March 5th, 2010 ===
 * Update to PARI 2.3.5
 * Removed the alglin2.c patch since it was included upstream.

=== pari-2.3.3.p8 (Jaap Spies, January 28th 2010) ===
 * Added 64 bit support for Open Solaris x64
 * This is trac http://trac.sagemath.org/sage_trac/ticket/8099

=== pari-2.3.3.p7 (David Kirkby, January 12th 2010) ===
 * #7901 Changes $MKDIR to 'mkdir' in the spkg-install file.
 * #7738 Removed Michael Abshoff as a maintainer.
 * Corrected the date on the previous entry - (it was
   previously marked as 2009.

=== pari-2.3.3.p6 (Mike Hansen, January 4th, 2010) ===
 * Fix on FreeBSD -- see #7825.

=== pari-2.3.3.p5 (David Kirkby, October 14th, 2009) ===
 * Removed the use of $CP, since it has been agreed there is no
   need for 'cp' to be specified as an environment variable
   and to just use the normal CP command. Likewise for 'rm'
 * Copied over a paripriv.h specific to Solaris, just as was done
   on OS X. This is trac #6579 which allows 'modified sage library code'
   to build on Solaris (SPARC) with no changes as long as the
   Sun compiler suite can not be found in the path. If that can
   be found, then the 'modified sage library code' will fail
   for a different reason (see #6595)

=== pari-2.3.3.p4 (???????????????????????????????????) ===

=== pari-2.3.3.p3 (???????????????????????????????????) ===

=== pari-2.3.3.p2 (Minh Van Nguyen, October 02nd, 2009) ===
 * Change optimization flag of src/config/get_cc from "-O3" to
   "-O1". This fixes a build issue on 32-bit Fedora 11. See ticket #7092.

=== pari-2.3.3.p1 (David Kirkby, June 30th, 2009)    ===
 * Change code in spkg-install which was supposed to add -fPIC on
   Solaris, to code that actually does add -fPIC on Solaris.
   Prior to this, PARI built fine on a Sun Blade 2000 without
   -fPIC, but failed on a Sun T5240 (hostname t2). I'm not
   entirely sure whether this is actually need on Solaris x86
   or not - GCC manual says SPARC (no mention of Solaris x86)
   but someone on comp.unxi.solaris reckons it should be on
   Solaris x86 too.

   Hopefully this issue can be resolved by the PARI developers and
   so the hack removed later. I'll report it to the PAPI developers.

   Thanks are due to Marc Glisse marc.glisse@gmail.com
   whose reply to my query on comp.unix.solaris solved this.

 * Corrected a mis-spelling on my name written by someone else.

=== pari-2.3.3.p0 (Michael Abshoff, Feb. 18th, 2008) ===
 * apply Karim's hnf patch
 * add OSX 10.5 64 bit build support

=== pari-2.3.3 (William Stein) ===
 * upgrade to the 2.3.3 release

=== pari-2.3.2 ===

* 2007-10-31: (Carl Witty)
   disable runpath altogether; we want Sage to be relocatable.
   install gphelp, and required documentation source files.

* 2007-09-09: (Michael Abshoff)
   add -fPIC to DCLFLAGS on Linux PPC in src/config/get_dlcflags

* 2007-03-04: included Pablo De Napoli (denapo@gmail.com)'s
   improvement so PARI will build on systems with runpath support.
   See sage/runpath.txt for details.

* 2006-09-28: (William Stein and Justin Walker)
  Modified PARI build scripts so that they build the
  PARI *shared* library even under OS X, and on OS X intel
  they build the x86/gmp kernel.


* I took the standard PARI tarball, but ran the script spkg-dist on it
  to create this directory.  This script does various things to some
  of the PARI files to make them work better with SAGE, the most
  important being to replace calls to exit() with calls to abort().

* Also, I placed a directory "sage" in this directory with some files
  needed by spkg-install.

* This changed removed -- 09/28/2006
#* I changed a line of config/Makefile.SH to
#      DLLDFLAGS  = $DLLDFLAGS -mimpure-text


* Put the extra galois groups data files in the data/galdata subdirectory,
