--- rlineimpl.py.orig	2009-01-18 08:00:41.000000000 -0800
+++ rlineimpl.py	2009-01-18 08:01:45.000000000 -0800
@@ -32,14 +32,18 @@
 # Test to see if libedit is being used instead of GNU readline.
 # Thanks to Boyd Waters for this patch.
 uses_libedit = False
-if sys.platform == 'darwin' and have_readline:
-    import commands
-    (status, result) = commands.getstatusoutput( "otool -L %s | grep libedit" % _rl.__file__ )
-    if status == 0 and len(result) > 0:
-        # we are bound to libedit - new in Leopard
-        _rl.parse_and_bind("bind ^I rl_complete")
-        print "Leopard libedit detected."
-        uses_libedit = True
+
+# Sage under gdb throws an error when running commands.getstatusoutput(), so disable this check 
+# because we do not link against libedit anyway.
+
+#if sys.platform == 'darwin' and have_readline:
+#    import commands
+#    (status, result) = commands.getstatusoutput( "otool -L %s | grep libedit" % _rl.__file__ )
+#    if status == 0 and len(result) > 0:
+#        # we are bound to libedit - new in Leopard
+#        _rl.parse_and_bind("bind ^I rl_complete")
+#        print "Leopard libedit detected."
+#        uses_libedit = True
 
 
 # the clear_history() function was only introduced in Python 2.4 and is
@@ -53,4 +57,4 @@
         _rl.clear_history
     except AttributeError:
         def clear_history(): pass
-        _rl.clear_history = clear_history
\ No newline at end of file
+        _rl.clear_history = clear_history
