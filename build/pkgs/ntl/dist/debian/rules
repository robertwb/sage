#!/usr/bin/make -f

DEB_AUTO_UPDATE_AUTOCONF = 2.50
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/autotools.mk
include /usr/share/cdbs/1/rules/patchsys-quilt.mk

DEB_CONFIGURE_INVOKE = cd src && $(DEB_CONFIGURE_SCRIPT_ENV) ./configure NTL_GMP_LIP=on NTL_STD_CXX=on PREFIX="/usr" CFLAGS="$(CFLAGS)" CXXFLAGS="$(CXXFLAGS)" GMP_PREFIX="/usr"
DEB_CONFIGURE_SCRIPT = ./src/configure
DEB_MAKE_INVOKE = cd src && $(DEB_MAKE_ENVVARS) $(MAKE) -C $(DEB_BUILDDIR)
DEB_MAKE_INSTALL_TARGET = install PREFIX=../debian/libntl-dev/usr

DEB_MAKE_CLEAN_TARGET = clobber

common-build-arch common-build-indep:: debian/stamp-makefile-build2

debian/stamp-makefile-build2:
	+$(DEB_MAKE_INVOKE) libntl.so
	touch $@

binary-fixup/libntl-dev::
	rm -f debian/libntl-dev/usr/share/doc/NTL/copying.txt.gz

clean::
	rm -f debian/stamp-makefile-build2
