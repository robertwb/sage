shobj: $(OBJ)

libntl.dylib:
	- rm -f $(OBJ) # clean, preserving tuning parameters
	make shobj
	$(LINK_CXX) -fPIC -dynamiclib -undefined dynamic_lookup -o libntl.dylib $(OBJ) $(GMP_OPT_LIBDIR) $(GMP_OPT_LIB)

libntl.dylib64:
	- rm -f $(OBJ) # clean, preserving tuning parameters
	make shobj
	$(LINK_CXX) -fPIC -m64 -dynamiclib -undefined dynamic_lookup -o libntl.dylib $(OBJ) $(GMP_OPT_LIBDIR) $(GMP_OPT_LIB)

libntl.dll:
	- rm -f $(OBJ) # clean, preserving tuning parameters
	make shobj
	$(LINK_CXX) -fPIC -shared -o libntl.dll $(OBJ) $(GMP_OPT_LIBDIR) $(GMP_OPT_LIB)

libntl.so: DIRNAME
	- rm -f $(OBJ) # clean, preserving tuning parameters
	make FPICFLAG=-fPIC shobj
	$(LINK_CXX) -fPIC -shared -o lib`cat DIRNAME`.so $(OBJ) $(GMP_OPT_LIBDIR) $(GMP_OPT_LIB)
	ln -s lib`cat DIRNAME`.so libntl.so
