--- src/sphinx/texinputs/Makefile	2010-07-24 12:07:38.000000000 +0200
+++ src/sphinx/texinputs/Makefile	2010-11-11 22:20:45.828703337 +0100
@@ -8,6 +8,8 @@
 ARCHIVEPRREFIX =
 # Additional LaTeX options
 LATEXOPTS =
+POOL_SIZE = 2000000
+SAVE_SIZE = 20000
 
 all: $(ALLPDF)
 all-pdf: $(ALLPDF)
@@ -33,20 +35,20 @@
 # The number of LaTeX runs is quite conservative, but I don't expect it
 # to get run often, so the little extra time won't hurt.
 %.dvi: %.tex
-	latex $(LATEXOPTS) '$<'
-	latex $(LATEXOPTS) '$<'
-	latex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
 	-makeindex -s python.ist '$(basename $<).idx'
-	latex $(LATEXOPTS) '$<'
-	latex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
 
 %.pdf: %.tex
-	pdflatex $(LATEXOPTS) '$<'
-	pdflatex $(LATEXOPTS) '$<'
-	pdflatex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
 	-makeindex -s python.ist '$(basename $<).idx'
-	pdflatex $(LATEXOPTS) '$<'
-	pdflatex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
+	env pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
 
 clean:
 	rm -f *.pdf *.dvi *.ps
