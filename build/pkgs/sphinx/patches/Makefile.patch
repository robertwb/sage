--- ../src/sphinx/texinputs/Makefile	2011-09-22 03:01:57.000000000 -0700
+++ src.patched/sphinx/texinputs/Makefile	2011-09-23 16:32:43.000000000 -0700
@@ -8,6 +8,8 @@
 ARCHIVEPRREFIX =
 # Additional LaTeX options
 LATEXOPTS =
+POOL_SIZE = 4000000
+SAVE_SIZE = 50000
 
 all: $(ALLPDF)
 all-pdf: $(ALLPDF)
@@ -43,20 +45,20 @@
 # The number of LaTeX runs is quite conservative, but I don't expect it
 # to get run often, so the little extra time won't hurt.
 %.dvi: %.tex
-	latex $(LATEXOPTS) '$<'
-	latex $(LATEXOPTS) '$<'
-	latex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
 	-makeindex -s python.ist '$(basename $<).idx'
-	latex $(LATEXOPTS) '$<'
-	latex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) latex $(LATEXOPTS) '$<'
 
 %.pdf: %.tex
-	pdflatex $(LATEXOPTS) '$<'
-	pdflatex $(LATEXOPTS) '$<'
-	pdflatex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
 	-makeindex -s python.ist '$(basename $<).idx'
-	pdflatex $(LATEXOPTS) '$<'
-	pdflatex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
+	env </dev/null pool_size=$(POOL_SIZE) save_size=$(SAVE_SIZE) pdflatex $(LATEXOPTS) '$<'
 
 clean:
 	rm -f *.dvi *.log *.ind *.aux *.toc *.syn *.idx *.out *.ilg *.pla
