17a18,41
> #####################################################################
> # Sage code -- all this code just sets the graphical_backend variable.
> # If True, that means we try to build GUI's; otherwise, we definitely
> # will not even try, even if we could.  See trac #5301.
> #####################################################################
> if os.environ.has_key('SAGE_MATPLOTLIB_GUI'):
>     if os.environ['SAGE_MATPLOTLIB_GUI'].lower() == 'no':
>         graphical_backend = False
>     else:
>         graphical_backend = True
> else:
>     if os.environ['UNAME'] == 'Darwin':
>         graphical_backend = False
>     else:
>         graphical_backend = True
> 
> print "NOTE: Set SAGE_MATPLOTLIB_GUI to anything but 'no' to try to build the Matplotlib GUI."
> if graphical_backend:
>     print "Building graphical backends.  WARNING: This may causing some annoying and confusing behavior"
>     print "when using Sage + pylab, at least on OS X."
> else:
>     print "Not building any matplotlib graphical backends."
>  #####################################################################
> 
127c151
< if options['build_windowing'] and sys.platform=='win32':
---
> if graphical_backend and options['build_windowing'] and sys.platform=='win32':
133c157
< if options['build_tkagg']:
---
> if graphical_backend and options['build_tkagg']:
139c163
< if options['build_wxagg']:
---
> if graphical_backend and options['build_wxagg']:
151c175
< if options['build_gtk']:
---
> if graphical_backend and options['build_gtk']:
154c178
< if options['build_gtkagg']:
---
> if graphical_backend and options['build_gtkagg']:
160c184
< if options['build_macosx']:
---
> if graphical_backend and options['build_macosx']:
