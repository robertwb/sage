= ATLAS =

== Description ==

This spkg builds ATLAS for Sage. It is build per default on Linux, but should also work on OSX and Solaris. The build is currently disabled on OSX until we sort out some linking issues on OSX. On FreeBSD dynamic libraries don't won since the wrong flags are passed to the linker. This will be fixed soon.

== License ==

3-clause BSD

== SPKG Maintainers ==
 * Michael Abshoff
 * Josh Kantor

== Upstream Contact ==

Atlas devel mainling list.

== Dependencies ==

 * Fortran

== Build Instructions/Notes ==

 * patches/archinfo_linux.c.patch: Fix Itanium2 support on modern RHEL 5 and SLES 10 systems
 * patches/archinfo_x86.c.patch: add cpuid support for Pentium D, E models
 * patches/Make.top.patch: add make install target for shared libs
 * patches/probe_comp.c.patch: work around -m64 issue on Itanium2
 * Tuning info for K732SSE1.tgz, PM32SSE2.tgz and PPCG432.tgz

== ChangeLog ==

=== atlas-3.8.3 (William Stein, February 20, 2009) ===
 * implement up to 5 auto-restarts with random timeouts.

=== atlas-3.8.2.p2 (Michael Abshoff, January 2nd, 2009) ===
 * Actually fix dynamic liblapack.so on Solaris as intended in atlas-3.8.2.p1
 * revert dumb mistake from atlas-3.8.2.p1 make_correct_shared.sh

=== atlas-3.8.2.p1 (Michael Abshoff, January 2nd, 2009) ===
 * Do not create any dynamic liblapack.so on non-Linux since they break numpy and scipy

=== atlas-3.8.2.p0 (Michael Abshoff, Januar 2nd, 2009) ===
 * copy Make.top into the right directory

=== atlas-3.8.2 (Michael Abshoff, Januar 1st, 2009) ===
 * update to latest upstream
 * add cleaned up patches to repo
 * clean up SPKG.txt some more

=== atlas-3.8.1.p3 (Michael Abshoff, July 6th, 2008) ===
 * Really apply the ATLAS-3.8.1-ppc-g4-7447-detect-fix.patch

=== atlas-3.8.1.p2 (Michael Abshoff, June 26th, 2008) ===
 * Complex GEMM sometimes accesses C when BETA=0 (#3290)
 * Bad GEMM call causes performance drop for all architectures (#3380)

=== atlas-3.8.1.p1 (Michael Abshoff, March 21st, 2008) ===
 * add Pentium D 64 bit tuning info (#2986)

=== atlas-3.8.1.p0 (Michael Abshoff, March 19th, 2008) ===
 * update patch description
 * Fix Itanium2 detection and work around "-m64" issue on RHEL 64 bit

=== atlas-3.8 (Michael Abshoff, March 19th, 2008) ===
 * update to 3.8.1 release
 * add tuning info for G4 on Linux
 * add tuning and detection for Pentium D process (together with Burcin Erocal)
 * clean up SPKG.txt

=== atlas-3.8.p11 (Michael Abshoff, Feb. 2nd, 2008) ===
 * add pre-tuned information for Pentium M, Athlon MP

=== atlas-3.8.p10 (Michael Abshoff, Jan. 26th, 2008) ===
 * exit spkg-check on Darwin (fixes #1934)

=== atlas-3.8.p9 (Michael Abshoff, Jan. 22nd, 2008) ===
 * fix SAGE_ATLAS_LIB to point to the root of the ATLAS directory
 * also link the headers which is the prime motivation for the change above
 * Apply row-major GEMM major ATLAS errata (#1787)

=== atlas-3.8.p8 (Josh Kantor, Jan. 19th, 2008) ===
 * Added optional environment variable SAGE_ATLAS_LIB. This should be a directory that contains liblapack.so,libcblas.so, libf77blas.so, libatlas.so. Instead of building atlas we make symlinks to these libraries in $SAGE_LOCAL/lib

=== atlas-3.8.p6 (Josh Kantor, Dec. 15th, 2007) ===
 * check if ATLAS bailed out due to unprecise timings. This happens if the system is too loaded.

=== atlas-3.8.p5 (Josh Kantor, Dec. 14th, 2007) ===
 * introduce workaround for 32 bit userspace build on 64 bit CPUs - see #1497

=== atlas-3.8.p4 (Michael Abshoff, Dec. 13th, 2007) ===
 * disable parallel make

=== atlas-3.8.p3 (Josh Kantor, Dec. 11th, 2007) ===
 * disable build on OSX for now

=== atlas-3.8 (Josh Kantor, Nov. 28th, 2007) ===
 * updated to version 3.8
 * applied patch so that shared libraries are copied
 * fortran wrapper uses sage_fortran
 * ATLAS produces borked lapack.so which has missing symbols
 * liblapack.so is around 100k while liblapack.a is 8 mb
 * manually create a full liblapack.so

=== atlas-3.7.38 (Michael Abshoff, Oct. 6th, 2007) ===
 * update to 3.7.38

=== atlas-3.7.37 (Michael Abshoff, Aug. 15th, 2007) ===
 * new upstream release (3.7.37), initial release
 * {{{make check}}} added in spkg-check

ToDo

* compile threading support conditionally
