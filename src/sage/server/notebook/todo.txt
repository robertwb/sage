BUGS:
   [] Konqueror -- sometimes shift-enter does not send the input correctly.
       The input does get sent, but the update queue business just
       doesn't work right.
   [] If you tab complete in an empty cell weird stuff happens related to
      the last tab completion.

TODO:
   [] long list of completions -- looks good at top but a weird at the
      bottom (formatting is munged)

   [] style the completion list:
          * css needs descent names
          * must be out of the way of what we're typing
          * everything should appear in the same place.

   [] Make a latex output for entire worksheets -- this would lead to nice
      pdf, etc. printing of worksheets.

   [] clicking anywhere below the last cell should create a new cell at the end.

   [] make it so all requested computations go into the compute
      stream at once (??)  currently a computation must complete
      before the next one is sent to the SAGE "compute kernel",
      but it would probably be easy to send several at once, and
      the result might be faster and more responsive, especially
      when evaluating a whole worksheet.

   [] easy way to change the default session for a worksheet.

   [] make the worksheet title be easily changeable independent of the filename.

   [] Create new worksheet should open a browser window in the new worksheet.

   [] Regarding your tip for locally specifying default browser, this
may not work ideally on Mac OS X: first, 'firefox' is generally not
accessible (it is "/whereever/you/keep/applications/
FireFox.app/Content/MacOS/firefox", and there may need to be other
arguments used to make it work smoothly.  If you use the "open"
command, then "/wherever/you/keep/applications/ FireFox.app" (no
trailing "/") should work.

As it is, I see lots of crankiness in the SAGE window where I call
notebook(), e.g., 2006-06-19 13:30:10.530 firefox-bin[21348] CFLog
(21): Error loading /System/Library/
Components/DictionaryService.component/Contents/MacOS/DictionaryService:
error code 4, error number 0 (Symbol not found:
__cg_png_destroy_write_struct Referenced from:
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/
Frameworks/ImageIO.framework/Versions/A/ImageIO Expected in:
/SandBox/Justin/sb/sage-1.3.1.1/local/lib/libPng.dylib

   [] If I set the default browser, as described by William, I get the
following when I exit SAGE, after using ^C to exit the notebook server:
sage: ^C
blah blah ...
sage:
KeyboardInterrupt
sage: ^D
Exiting SAGE (CPU time 0m0.34s, Wall time 8m0.28s).
Python 2.4.3 (#1, May 17 2006, 23:50:57)
[GCC 4.0.1 (Apple Computer, Inc. build 5250)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
 >>>
I don't see this if I use the "pre-defined" default browser.

   [] latex -- add support for embedding images using \includegraphics???

   [] deleting saved objects

[x]This reminds me, I wonder if the GPL requires an "about" link, which
opens a new webpage (or a new tab) with your name+email and the copyright
info. Even if it's not required, I think it's a good idea. What do you
think?
That's a good idea.   The license() command gives that info, but
it's already so long it gets truncated.   It should be that there
is a link that pops up the license() info in a popup.

  [] At some point I'll add a feature so you can set the session when
     you create a new worksheet.  What I've just done is make it so
     that any new worksheets created use a given CAS.  If you restart
     the notebook with a different system= option, then new worksheets
     get that CAS, but old ones stay the way they are.


   [] session switching -- should be able to switch back and forth
      multiple times in a given input cell. This would in no way be
      difficult to code.  E.g.,
2+2
%octave
...
%sage
...
%latex
...
etc.

   [] have a window that pops up and shows all sage commands
      and is easy to search.

   [] worksheets with lots of graphics sometimes feel slow.???

   [] (Note -- there is currently no support for
     pulling in objects and evaluating code in SAGE by typing
     "sage(...)" inside the input block (for another system).
        This is planned.)

   [] optimization: output should update only the end, not the whole
      thing every time.

   [] (bad idea?) Make it so tracebacks in output can be toggled
between showing the inside of the traceback and not via some
javascript, with the default not showing the traceback (just the first
and last line).

[] (??) convenience: rename worksheet -- really workbooks should just be files
   on the computer that can be anywhere -- while working with them
   they are stored in the local notebook directory, but they should
   be save-able / load-able from anywhere on the computer / network.

[] move some buttons to worksheet title:
    download, text, eval, interrupt, hide
   --> but this means "scattering links", which Tish thinks is bad.<

[] Ability to load a plain text file log, e.g.,

 sage:  k=linbox.GFq(2,8,GF(2**8).polynomial())
 sage:  R.<x,y>=PolynomialRing(k,2)
 sage:  f=k.random_element()*x^3+x*y*k.random_element()+k.random_element();f
  _3 = 118 + 50*x*y + 183*x^3
 sage:  time for i in range(1000): _ = f*f

and have it appear immediately as if it were a worksheet.

MORE generally -- have a full plain text format for worksheets.

[] SAJAX -- ajax terminal -- make it embedded somehow (?) into
   the notebook, e.g., as another tab.

[] keyboard access to variable list.

[] undelete -- with a countdown that is interruptable. ???

[] So to indent lines, seems like the spacebar is the only option.

[] click on variable and get a download

[] good support for a "presentation" mode.

[] os.sytem('pydoc -k <...>')  -- interesting

[] debugger -- some way to enter pdb and use it from web interface

[] save all objects in a session to a single variable:
     - a button in the variables pane -- asks for var name.
       OR drag variables pane to worksheets (?).

   [] ability to select any subset of the cells, e.g., by
      checking on a button next to each or something and do
      each of the following ops:
          delete them
          export them as another worksheet
      Also, should be able to insert a worksheet between two cells.
      Basically, copy, paste, and delete with bits of worksheets.
      Should also be able to reorganize them.

DONE

   [x] Ability to switch from one log (=worksheet) to another via
      the web interface.
   [x] Add text annotation that is not evaluated
      between blocks (maybe in html?)
   [x] Ability to interrupt running calculations directly
      from the web interface (no console access)
   [x] Nice animation while a computation is proceeding.
   [x] Some way to show output as it is computed.
   [x] Option to delete blocks
   [x] Make block expand if enter a lot of text into it.
   [x] Evaluate the entire worksheet
   [x] Theme-able / skin-able
   [x] Downloading and access to exact log of IO to client SAGE process
   [x] Saving and loading of all objects in a session
   [x] Save session objects as to log objects so don't have to re-eval?
   [x] The entire page is resent/updated every time you hit shift-enter;
      using 'AJAX' this flicker/lag could be completely eliminated.
   [x] When pressing shift-enter a line feed is inserted temporarily
      into the inbox, which is unnerving.
   [x] Add authentication
   [x] Embed the log object in the html file, so server session
      can be restared directly using the html file!  E.g., embed
      pickled Log object in a comment at end of the .html file.
   [x] Ability to upload and download source files (to be run)
      via web interface; maybe ability to edit them too, via some
      'rich' code editing javascript 'widget'.
   [x] rewrite tables using CSS
   [x] load and attaching scripts.
   [x] a way to interactively watch the output of a running computation
      (in verbose mode).
   [x] undo -- have infinite undo and redo of the SAGE *log*, i.e.,
      text I/O (and possibly graphics).  does not save *state* of
      the "sage kernel".
   [x] switch into mode where the whole input box is parsed by
      another system, e.g., Maxima.

   [x] Saving and loading of individual objects: -- should be trivial,
       but is very tedious right now.
       (maybe all relative paths for save/load should be redirected
        to sage_server directory?!)
   [x] The "move to the current input box" javascript *only* works
      with firefox (not opera, not konqueror); also this should
      just keep the page position where it is rather than move it.
      Moving to a more AJAX-ish model would alternatively fix this, maybe.
   [x] A. Clemesha: shrink/expand input/output blocks
   [x] A. Clemesha: When hit shift-enter the next text box should be made
      into focus.
   [x] Embedded graphics from plots;
       also embed png from latexing of math objects (so they look nice).

[x] save_session broken.
[x] Manipulating cell list:
     -- add new cell (automatic at end)
     -- add cell between two existing cells
     -- delete cell

[x] Saved objects:
     -- info: load/save

[x] SAGE restart (with confirmation alert)

[x] interrupt -- should add (interrupted) to top of all output

[x] interrupt -- red only when comp running!!

[x] Fix worksheet area so it doesn't scroll horizontally

[x] Separate the variables / scripts panes from the worksheets / objects panes.

[x] Variables:
     -- info:
     -- change typeface of "type" of variable, e.g., in parens and dimmer,
        but variable name in bold.

[x] Introspection:
      Tab completion / search / help -- bring in from before.

[x] bug: when backspace away a cell, get taken to next -- should get taken to previous.

[x] another idea:
     where to comps get run?  they could all be run from
     an explicitly given directory when the notebook is
     started.  Then new files are copied to their cell
     directories.    another possibility:
       define a variable "HOME" in all sage0's,
       which is the directory
       from which SAGE was started.   Then users
       can load by using HOME + ...


[x] fix variables pane

[x] support for .sage/init.sage

[x] '\n' alone on a line breaks it.  If it isn't the last line it's ok.

[x] preparser fix -- triple quoted strings in middle of loaded files should be ignored

[x] Scripts: way to load/attach via web interface.

[] some "magic":
 done    - attach   # will work from DIR if not abs path.
 done    - load     # will work from DIR if not abs path.
 done    - save_session -- saves to objects dir

 done    - %gp: at the top of a block and it gets executed in pari.

[] latex -- support for embedding in output?, e.g.,
        view(x)
   embeds latex repn.

[x] todo: make the saved state file backup the last safe state, to
   avoid the potential for corruption if the server Python process is
   killed while saving state.  Also, this could easily allow for a
   sophisticated undo function; design ideas welcome...

[] variables: easy way to save any variable to a var with the same name
   in the common saved objects store.
   xxx -- no save session good enough...

[] worksheets list -- could have status information, e.g.,
   if a comp is running, could make the entry redish until
   it is done.

 [x] fix that this happens:
    s() if not __x__ in __SAGENB__globals and __x__[0] != "_" and str(type(globals( )[__x__])) != "function"]) ' ()

[x] make evaluation much more robust:
print ">>> dkjd"

s.chdir("/home/was/people/josh/sage_notebook/worksheets/_scratch_/cells/1")
[A

 [x] restart doesn't reset the output box in which it occurs.
 [x] fails if load a deleted worksheet.
[x] introspect -- if see a ? before any quote and to the right, then introspect.

[] introspection -- f1
   completions -- f2
[x] eval of empty cell -- skipped
[x] variables -- much more robust
[x] Completion should complete and not just list completions.
[x] I'll make control-up and control-down move between input boxes
(instead of tab).

[x] up arrow broken after inputing new cells
[x] And the plan is that the notebook should be usable mouse free with,
at least, no less functionality than one has in the command line.
(I.e., the mouse may give you more functionality than the command
line, but you won't loose functionality that you had on the command
line.  Right now this isn't the case, e.g., there's no reverse search
or history scroll yet.)

 [x] attached files list doesn't get updated
 [x] fails if worksheet 0 is deleted.
 [x] put the output in nowrap, then
    import time
    for i in range(100):
       time.sleep(1)
       print i

[x] tabbed worksheets.  -- just make it easier to use your web browser; i.e., this
   is already a feature of web browsers.

[x]
>   In an xterm, I can copy and paste input and output to e-mail
>   an example session to someone.  I can't make firefox copy
>   multiple boxes.

That's because currently the input boxes are all "text areas"
even the non-active ones.  If I change them to be <pre>'s when
they aren't selected then you will be able to copy everything
except the box you're currently typing into.

-- fix: text version of worksheet


[x] restart should start on same worksheet as before.

[x] workbooks -- link

[x] i need to rethink the design of having multiple worksheets at once:
    possibilities:
        xx have multiple worksheet div's all in the html, each
           with an id.  have a way to "close" a worksheet, i.e.,
           button in upper right (Maybe a close link like the Help, etc. links).
           the update function has to tell about *all* the worksheets
           rather than just one:
               update contains:
                    number of worksheets with data
                    worksheet number <data>  ...
                    worksheet number <data>  ...
               and the worksheet data will allow us to set the color
               on the the worksheets tab on the left.
    (all html downloaded at once; so switching done entirely in js)
     -- new
     -- switching
     -- deleting

[x] It'll be nice to record the history of commands like in a shell.

[x] quit function should do something
 sage: quit
'Use Ctrl-D (i.e. EOF), %Exit, or %Quit to exit without confirmation.'

[x] latex an entry cell.

[x] output shouldn't include html links until it's done.
[x] tab completion of empty string is 4 spaces.

[x] fix decimal point before number sage_eval('.5') should work!Q
[x] update the help
[x] add hide/show of input cells
[x] add print-screen function
[x] Have the cell output option be saved via async.
[x] doesn't chop off exec stuff after some errors:
for i in range(10):

   [x] "time " disappears from saved input for cells
   [x] add a "restart sage" button in the top.
[x] Make an entire Gap Notebook or Magma Notebook or ...

   [x] text, eg., matrix, look a little indented when output.

   [x] tab completion sticks cursor at end of text when expands output.
       (Tom fixed this -- not in official sage yet)

   [x] Safari -- (from J. Walker) I just tried (1.3.3.6)
"R.<x>=PolynomialRing(Integers(),'x')" in Safari, it mostly seemed to
work, save the minor problem that the "(" following the procedure name
doesn't seem to take.  When I try to execute it I get a traceback
indicating that it (sage) hasn't seen the "(".

   [x] images in output sometimes "moved down" after reload of page!

   [x] (NO - this conflicts with Tom's very nice "tab" introspects
      when typing input to a function.)
      tab completion could also do completions on keyword arguments
      to methods.   ; these would have to be in addition to all
      valid identifiers, since you might just want to pass a valid
      id in.  -- and it shouldn't fail if the object that has the
      method isn't defined yet.

   [] CRAZY: try a modified version of the worksheet that does multiple
      input cells all in a different thread.  This might be
      horrible, but would be interest to try.

   [x] enter to submit when adding a new worksheet or deleting.

[x] HTML cells in addition to SAGE code cells; or just better typesetting
   support and way to hide the input (!)

[x] print -- javascript button, which displays the whole page as one page
   (no scrolling, etc.), etc., and calls print.

[x] easy user override of css elements.

[x] should be able to download/upload complete worksheets as a single file
   and move them in/out of other notebooks.  How?
     1. an sobj defines the worksheet, and a tarball the data and graphs,
        so tarball it up with the sobj.
     2. interface -- when you mouse over a worksheet, a menu appears with
        the option to download it to a file.
     3. Also, there's an upload link in the worksheets list.

[x] Markup mode?:
   If the input box begins in %html then the output is in html instead
   of plain text, and the input box gets shrunk.  This would allow for
   sophisticated markup.

[x] favicon

[x] CTRL enter does this -- -when eval: always insert a new cell after the current one???
     mathematica does *not* do this, but word processors do.

   [x] restart (with confirm) button -- lets you restart the
      client SAGE interpreter that is being run by the web server.
      This way you don't have to keep restarting the web server
      when doing code development.  Have button that can also
      save session, restart, and load session!
   [x] way to time how long a computation takes.
   [x] word wrap -- default on, but toggle on/off on a cell-by-cell basis
      (will require ajax to do the wrapped/non-wrapped computation, or
      store both versions in the html... so will work offline)
   [x] input one form shouldn't delete data from any other forms;
       e.g., you could be editing one form and submit another!
   [x] The whole interface needs to be slimmed down so bunches of single
      line input (and output) will work.
