<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>DSAGE Stats</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Yi Qiang">

	<link rel="stylesheet" type="text/css" href="static/dsage_web.css">
	<script src='static/jquery.js' type='text/javascript'></script>
	<script src='static/jquery.tablesorter.pack.js' type='text/javascript'></script>
	<script src='static/jquery.history.js' type='text/javascript'></script>
	<script src='static/dsage_web.js' type='text/javascript'></script>
	<script src='static/jquery.form.js' type='text/javascript'></script>
</head>
<body>
    <div id='page'>
	    <div id='page_header'>
	        Distributed Sage<br />
	        <div id='server_text'>
	            (%s:%s)
            </div>
	    </div>
	    <center>
	    <ul id="tabnav">
	    	<li class="tab1">
	            <a href="#jobs" rel="history" onClick="showJobs()">Job Status</a>
	    	</li>
	    	<li class="tab2">
	    	    <a href="#server" rel="history" onClick="getServerDetails()">Server Status</a>
	    	</li>
	    	<li class="tab3">
	    	    <a href="#help" rel="history"onClick="getHelp()">Help</a>
		    </li>
	    </ul>
	    </center>
		<table id='jobs_table' class='tablesorter' style='display:none;'>
		    <thead>
                <tr>
                    <th>Job Name</th>
                    <th>Status</th>
                    <th>Username</th>
                    <th>Creation Time</th>
                    <th>Last Update</th>
                    <th>Wall Time</th>
                    <th>Priority</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
		</table>
		<table id='server_details' class='tablesorter' style='display:none;'>
		</table>
		<table id='job_details' class='tablesorter' style='display:none;'>
		</table>
		<table id='workers' class='tablesorter' style='display:none;'>
		</table>
		<table id='clients' class='tablesorter' style='display:none;'>
		</table>
		<div id="page_nav">
		    <a href='#' id='earlier'>Earlier</a>
		    <a href='#' id='later'>Later</a>
		</div>
		<div id="navigator">
			Showing <a href='#' id='10' onClick='setCount(10);updateCurrentPage()'>10</a>,
					<a href='#' id = '25' onClick='setCount(25);updateCurrentPage()'>25</a>, or
					<a href='#' id = '50' onClick='setCount(50);updateCurrentPage()'>50</a>
			jobs per page.
		</div>
		<div id='quick_help' style='display:none'>
		    To connect to this server as a client, in your SAGE session type:
		    <div class='code'>
		        d = dsage.connect(server='%s', port=%s)
	        </div>
	        To connect to this server as a worker, type:
	        <div class='code'>
	            d = dsage.worker(server='%s', port=%s)
	        </div>
        </div>
		<div id="help">
		</div>
		<div id="user_management" style='display:none;'>
		    <form id="add_client" name="add_client" action="user_management" method="POST">
            <strong>Username: </strong>
            <input type="text" name="username">
            <br />
            <strong>Publickey: </strong>
            <br />
            <textarea id="pubkey" name="pubkey" cols=40 rows=10></textarea>
            <br>
            <input type="submit" value="Add User">
            </form>
            <div id="add_client_help">
                To add a user, enter the desired username and paste in their public key which can be found in $HOME/.sage/dsage/dsage_key.pub
            </div>
		</div>
		<div id="success" style='display:none;'>
		    <strong>User added!</strong>
		</div>
    </div>
</body>
</html>
