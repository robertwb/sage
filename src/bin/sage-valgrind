#!/bin/bash

# We reuse the gdb pythonstartup script.
PYTHONSTARTUP=$SAGE_ROOT/local/bin/sage-gdb-pythonstartup
export PYTHONSTARTUP
echo $PYTHONSTARTUP
if [ ! -d "$HOME/.sage/valgrind" ]; then
    mkdir "$HOME/.sage/valgrind"
fi
LOG="$HOME"/.sage/valgrind/sage-memcheck.%p
echo "Log file is $LOG"
valgrind --tool=memcheck --leak-resolution=high --trace-children=yes \
         --log-file="$LOG" --show-reachable=yes --leak-check=full  python -i
